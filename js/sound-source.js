(function(){var d=function(a,b,c,d,e,f){this.x=a;this.y=b;this.z=c;this.sound={};this.sound.volume=e.createGain();this.sound.panner=e.createPanner();this.sound.volume.connect(this.sound.panner);this.sound.panner.connect(f);this.sound.panner.setPosition(a,b,c);this.sound.panner.refDistance=10;this.sound.panner.rolloffFactor=0.5;this.sound.panner.maxDistance=1E3;this.sound.loop=!1;this.ctx=e;this.loadSound(d);this.playing=this.loaded=!1;this.onended=void 0};d.prototype.setLoop=function(a){this.sound.loop=
a};d.prototype.loadSound=function(a){var b=new XMLHttpRequest;b.open("GET",a,!0);b.responseType="arraybuffer";var c=this;b.onload=function(a){c.sound.buffer=c.ctx.createBuffer(this.response,!1);c.loaded=!0};b.send()};d.prototype.setPosition=function(a,b,c){this.x=a;this.y=b;this.z=c;this.sound.panner.setPosition(a,b,c)};d.prototype.start=function(){this.sound.source=this.ctx.createBufferSource();this.sound.source.buffer=this.sound.buffer;this.sound.source.connect(this.sound.volume);this.sound.source.loop=
this.sound.loop;this.sound.source.start(0);var a=this;this.sound.source.onended=function(b){a.playing=!1;if("undefined"!==typeof a.onended)a.onended()};this.playing=!0};d.prototype.stop=function(){this.sound.source.stop(0);this.playing=!1};window.SoundSource=d})();