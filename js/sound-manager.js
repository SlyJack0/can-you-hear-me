(function(){var b=function(a,d,h){this.soundTriggers=[];var c=new XMLHttpRequest;c.open("GET","data/sounds.json",!0);var b=this;c.onload=function(c){c=JSON.parse(this.response);for(var g=0;g<c.length;g++){var e=c[g],f=new SoundSource(h.tileSize*e.tileX,h.tileSize*e.tileY,0,e.file,a,d);f.setLoop(e.loop);f.sound.volume.gain.value=e.gain;"sound/ending.wav"===e.file&&(console.log("asd"),f.onended=function(){var a=new CustomEvent("gameover",{detail:{},bubbles:!0,cancelable:!1});window.dispatchEvent(a)});
"undefined"===typeof b.soundTriggers[e.trigger]&&(b.soundTriggers[e.trigger]=[]);b.soundTriggers[e.trigger].push(f)}};c.send()};b.prototype.triggerSounds=function(a){a=this.soundTriggers[a];if("undefined"!==typeof a)for(var d=0;d<a.length;d++)a[d].start()};b.prototype.stopAll=function(){for(var a=0;a<this.soundTriggers.length;a++){var d=this.soundTriggers[a];if("undefined"!==typeof d)for(var b=0;b<d.length;b++){var c=d[b];"undefined"!==typeof c&&c.stop()}}};window.SoundManager=b})();